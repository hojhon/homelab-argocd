# apiVersion: argoproj.io/v1alpha1
# kind: Application
# metadata:
#   name: vault-cloudflared
#   namespace: argocd
# spec:
#   project: default
#   source:
#     repoURL: 'https://cloudflare.github.io/helm-charts'
#     targetRevision: 0.1.2
#     chart: cloudflare-tunnel-remote
#     helm:
#       values: |
#         images:
#           cloudflared:
#             repository: "cloudflare/cloudflared"
#             tag: "2024.2.0"
#         tunnel:
#           existingSecret: vault-cloudflared-cloudflare-tunnel-remote
#           tokenKey: tunnelToken
#           name: vault
#         ingress:
#           - hostname: vault.shinyshiba.com
#             service: http://vault.vault.svc:8200
#             originRequest:
#               noTLSVerify: true
#           - service: http_status:404
#   destination:
#     server: 'https://kubernetes.default.svc'
#     namespace: vault
#   ignoreDifferences:
#     - group: ""
#       kind: Secret
#       name: vault-site-tunnel-secret
#       jsonPointers:
#         - /data/tunnelToken
#         - /stringData/tunnelToken
#   syncPolicy:
#     automated:
#       prune: true
#       selfHeal: true
#     syncOptions:
#       - CreateNamespace=true
